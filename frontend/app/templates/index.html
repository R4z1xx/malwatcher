{% extends 'base.html' %}

{% block content %}
<div class="w-full min-h-[calc(100vh-4rem)] flex items-center justify-center">
    <form id="ioc-form" action="{{ url_for('main.handle_check') }}" method="POST" class="min-w-[75%] flex flex-col items-center justify-center shadow-none rounded px-8 pt-6 pb-8 mb-4">
        <div class="mb-4 w-full">
            <label class="input input-bordered flex items-center gap-2 dark:bg-woodsmoke-900">
                <input name="ioc" type="text" class="appearance-none w-full py-2 px-3 text-gray-700 dark:text-gray-100 dark:bg-woodsmoke-900 leading-tight focus:outline-none focus:shadow-outline" autocomplete="off" placeholder="IP address, domain, URL or file hash" required/>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="fill-woodsmoke-950 dark:fill-gray-100 w-4 h-4 opacity-70"><path fill-rule="evenodd" d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" clip-rule="evenodd" /></svg>
            </label>
        </div>
        <div class="flex items-center justify-between">
            <button id="submit-btn" class="btn-wide bg-torchred-500 hover:bg-torchred-700 duration-200 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
                MalWatch'It
            </button>
        </div>
    </form>
    <div id="loading-skeleton" class="hidden h-full p-6 max-w-screen-2xl mx-auto w-[80%]">
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
            {% for i in range(6) %}
            <div class="skeleton-card {% if i >= 2 %}hidden md:block{% endif %} {% if i >= 4 %}hidden xl:block{% endif %}">
                <div class="bg-white dark:bg-woodsmoke-900 rounded-lg shadow-md p-6 border-l-4 border-woodsmoke-300 dark:border-woodsmoke-700">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-xl font-semibold text-woodsmoke-600 dark:text-woodsmoke-100">
                            <div class="skeleton h-6 w-32"></div>
                        </h2>
                        <span class="px-3 py-1 bg-woodsmoke-100 dark:bg-woodsmoke-800 text-woodsmoke-600 dark:text-woodsmoke-300 text-sm skeleton skeleton-status w-[63px]">
                            <div class="h-4 w-16"></div>
                        </span>
                    </div>
                    <dl class="space-y-3">
                        <div>
                            <dt class="text-sm font-medium text-woodsmoke-500 dark:text-woodsmoke-300">
                                <div class="skeleton h-4 w-24 mb-1"></div>
                            </dt>
                            <dd class="text-sm">
                                <div class="skeleton h-4 w-full"></div>
                            </dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-woodsmoke-500 dark:text-woodsmoke-300">
                                <div class="skeleton h-4 w-20 mb-1"></div>
                            </dt>
                            <dd class="text-sm">
                                <div class="skeleton h-4 w-3/4"></div>
                            </dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-woodsmoke-500 dark:text-woodsmoke-300">
                                <div class="skeleton h-4 w-28 mb-1"></div>
                            </dt>
                            <dd class="text-sm">
                                <div class="flex items-center">
                                    <div class="w-16 mr-2">
                                        <div class="skeleton h-4 w-10"></div>
                                    </div>
                                    
                                </div>
                            </dd>
                        </div>
                        <div>
                            <dt class="text-sm font-medium text-woodsmoke-500 dark:text-woodsmoke-300">
                                <div class="skeleton h-4 w-32 mb-1"></div>
                            </dt>
                            <dd class="text-sm flex flex-wrap gap-2 mt-2">
                                <div class="skeleton h-6 w-16 rounded"></div>
                                <div class="skeleton h-6 w-20 rounded"></div>
                                <div class="skeleton h-6 w-14 rounded"></div>
                            </dd>
                        </div>
                    </dl>
                    <div class="mt-4">
                        <div class="inline-flex items-center px-4 py-2 bg-woodsmoke-200 dark:bg-woodsmoke-800 text-transparent rounded-md text-sm">
                            <div class="skeleton h-4 w-24"></div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
document.getElementById('ioc-form').addEventListener('submit', function(e) {
    document.getElementById('loading-skeleton').classList.remove('hidden');
    document.querySelector('form').classList.add('hidden');
    
    const submitBtn = document.getElementById('submit-btn');
    submitBtn.disabled = true;
    submitBtn.innerHTML = 'Processing...';
    
    setTimeout(() => {
    }, 100);
});
</script>
{% endblock %}
